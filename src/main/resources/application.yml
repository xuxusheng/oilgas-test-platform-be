# 通用基础配置 (application.yml)
# ----------------------------------------------------------------
# 该文件包含所有环境共享的通用配置。
# 特定环境的配置(如数据库连接、日志级别)应在各自的 application-{profile}.yml 文件中定义。
#
# 激活特定环境的方式 (推荐):
#   - 命令行参数: java -jar your-app.jar --spring.profiles.active=prod
#   - 环境变量: export SPRING_PROFILES_ACTIVE=prod && java -jar your-app.jar

# 服务器配置
server:
  port: 8080

# Spring Boot 应用配置
spring:
  # 默认激活 local 环境, 方便本地一键启动
  profiles:
    active: local

  # 应用基础信息
  application:
    name: springboot-app

  # Jackson 全局配置
  jackson:
    serialization:
      write-dates-as-timestamps: false
      write-date-timestamps-as-nanoseconds: false
    deserialization:
      read-date-timestamps-as-nanoseconds: false

  # --- 数据源驱动 --- (具体的 URL、用户名、密码在各环境配置)
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver

  # --- 通用 JPA/Hibernate 配置 ---
  jpa:
    open-in-view: false
    properties:
      hibernate:
        format_sql: true # SQL 格式化,方便日志查看

  # --- 通用 Redis 配置 --- (具体的 host、密码在各环境配置)
  data:
    redis:
      database: 0
      port: 6379

# --- 通用 Sa-Token 配置 ---
sa-token:
  # JWT 密钥
  jwt-secret-key: "your-secret-key-change-in-production"
  # 不输出控制台日志，由日志框架接管
  is-print: false

# --- 日志配置 ---
logging:
  config: classpath:logback-spring.xml # 指定日志配置文件

# --- Actuator 监控端点配置 (安全默认值) ---
management:
  endpoints:
    web:
      exposure:
        # 默认只暴露最安全的端点,其它环境可按需覆盖
        include: health,info
  endpoint:
    health:
      # 默认不显示详细信息
      show-details: never

# --- Yimusi 自定义配置 ---
yimusi:
  lock:
    redisson:
      enabled: true
      # 分布式锁等待时间
      wait-time: PT5S
      # 看门狗超时时间
      lock-watchdog-timeout: PT30S

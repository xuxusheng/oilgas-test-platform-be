# 服务器配置
server:
  port: 8080

# 应用配置
spring:
  profiles:
    active: dev # 激活 dev 环境
  application:
    name: springboot-app
  # Jackson 配置
  jackson:
    serialization:
      write-dates-as-timestamps: false
      write-date-timestamps-as-nanoseconds: false
    deserialization:
      read-date-timestamps-as-nanoseconds: false
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
      password: redis123456
  # --- 数据源配置 ---
  datasource:
    url: jdbc:mysql://localhost:3306/oilgas_test?useSSL=false&serverTimezone=UTC&characterEncoding=UTF-8
    username: yimusi
    password: yimusi123456
    driver-class-name: com.mysql.cj.jdbc.Driver
  # --- JPA/Hibernate 配置 ---
  jpa:
    open-in-view: false
    hibernate:
      # ddl-auto: [create | create-drop | update | validate | none]
      #   - update: 启动时自动更新表结构(开发方便)
      #   - validate: 启动时校验表结构
      #   - none: 生产环境推荐,更安全
      ddl-auto: update
    # 在控制台显示执行的SQL语句
    show-sql: true
    properties:
      hibernate:
        format_sql: true

# Sa-Token 配置
sa-token:
  token-style: jwt
  jwt-secret-key: yimusi-oilgas-platform-change-me-for-production
  timeout: 2592000   # 30 天
  active-timeout: -1
  is-print: true
  is-log: false

# --- 日志配置 ---
logging:
  config: classpath:logback-spring.xml # 指定日志配置文件

# --- Actuator 监控端点配置 ---
management:
  endpoints:
    web:
      exposure:
        # 使用环境变量配置端点暴露,默认安全配置
        # 生产环境: ["health", "info", "prometheus"]
        # 开发环境: ["health", "info", "metrics", "prometheus"]
        # 测试环境/调试: ["*"]
        include: ${ACTUATOR_ENDPOINTS:health,info}
  endpoint:
    health:
      # 默认只显示基本信息,保护敏感数据
      show-details: never

yimusi:
  lock:
    redisson:
      enabled: true
      wait-time: PT5S
      lock-watchdog-timeout: PT30S

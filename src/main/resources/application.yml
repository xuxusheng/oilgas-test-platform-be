# 服务器配置
server:
  port: 8080

# 应用配置
spring:
  application:
    name: springboot-app
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
  # --- 数据源配置 ---
  datasource:
    url: jdbc:mysql://localhost:3306/oilgas_test_db?useSSL=false&serverTimezone=UTC&characterEncoding=UTF-8
    username: root
    password: root
    driver-class-name: com.mysql.cj.jdbc.Driver
  # --- JPA/Hibernate 配置 ---
  jpa:
    hibernate:
      # ddl-auto: [create | create-drop | update | validate | none]
      #   - update: 启动时自动更新表结构(开发方便)
      #   - validate: 启动时校验表结构
      #   - none: 生产环境推荐,更安全
      ddl-auto: update
    # 在控制台显示执行的SQL语句
    show-sql: true
    properties:
      hibernate:
        format_sql: true

# Sa-Token 配置
sa-token:
  token-style: jwt
  jwt-secret-key: yimusi-oilgas-platform-change-me-for-production
  timeout: 2592000   # 30 天
  active-timeout: -1
  is-print: true
  is-log: false

# --- 日志配置 ---
logging:
  config: classpath:logback-spring.xml
  file:
    name: ./logs/springboot-app.log
  level:
    root: INFO
    com.yimusi: INFO
    org.springframework: WARN
    org.hibernate: WARN
    org.hibernate.SQL: WARN
    com.zaxxer.hikari: WARN

# --- Actuator 监控端点配置 ---
management:
  endpoints:
    web:
      exposure:
        # [安全警告] 开发时可设为 "*",生产环境强烈建议改为 ["health", "info", "prometheus"]
        include: "*"
  endpoint:
    health:
      # 默认只显示基本信息,保护敏感数据
      show-details: never

yimusi:
  lock:
    redisson:
      enabled: true
      wait-time: PT5S
      lease-time: PT30S

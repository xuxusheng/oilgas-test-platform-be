# 生产环境配置 (prod)
# ----------------------------------------------------------------
# 这是最严格、最安全的生产环境配置。
# 启动方式: java -jar app.jar --spring.profiles.active=prod
# Docker 环境: 通过环境变量覆盖配置

spring:
  # --- 数据库配置 ---
  datasource:
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}

    # --- 连接池配置 (HikariCP) ---
    hikari:
      maximum-pool-size: 20
      minimum-idle: 20
      connection-timeout: 3000
      max-lifetime: 1800000
      idle-timeout: 600000

  # --- JPA/Hibernate 配置 ---
  jpa:
    hibernate:
      ddl-auto: ${JPA_DDL_AUTO:none}
    show-sql: false

  # --- Redis 配置 ---
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST}
      port: ${SPRING_DATA_REDIS_PORT}
      password: ${SPRING_DATA_REDIS_PASSWORD}
      database: 0

# --- Sa-Token 配置 ---
sa-token:
  is-print: false
  is-log: true
  jwt-secret-key: ${SA_TOKEN_JWT_SECRET_KEY}
  timeout: 604800

# --- Actuator 监控端点 ---
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      show-details: never

# --- 日志级别 ---
logging:
  level:
    root: INFO
    com.yimusi: INFO
